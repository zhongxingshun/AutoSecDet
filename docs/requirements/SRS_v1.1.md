# 需求规格说明书 (SRS)

> 项目名称: 自动化安全检测平台 (AutoSecDet)
> 版本: v1.1
> 创建日期: 2026-01-28
> 最后更新: 2026-01-28 (评审修订)
> 作者: 安全团队

---

## 修订历史

| 版本 | 日期 | 作者 | 描述 |
|------|------|------|------|
| v1.0 | 2026-01-28 | 安全团队 | 初稿，基于原始需求分析 |
| v1.1 | 2026-01-28 | 安全团队 | 根据评审意见修订，增加超时机制、中断策略、历史记录、执行日志等 |

---

## 1. 项目概述

### 1.1 项目背景

本平台主要服务于智能楼宇对讲系统（包括嵌入式室内/门口机、安卓室内/门口机、门禁设备）的安全合规性检测。通过自动化手段，将现有的百余项安全用例转化为可执行的检测任务，旨在提升检测效率，确保设备符合安全基线要求。

**驱动因素**:
- 现有安全检测依赖人工执行，效率低下
- 安全用例数量庞大（100+项），人工执行易出错
- 需要标准化的检测流程和报告输出

### 1.2 项目目标

- **业务目标**: 将安全检测效率提升 80%，实现一键式自动化检测
- **用户目标**: 测试人员可快速执行检测任务并获取标准化报告
- **技术目标**: 构建可扩展的检测框架，支持多类型脚本执行

### 1.3 项目范围

**包含范围 (In Scope)**:
- [x] 目标设备 IP 地址输入与校验
- [x] 检测用例选择与执行控制
- [x] 实时检测进度与状态展示
- [x] 检测用例库的增删改查管理
- [x] 用例分类管理
- [x] 检测结果展示与报告导出
- [x] 用户身份验证与权限控制

**不包含范围 (Out of Scope)**:
- [ ] 批量 IP 地址扫描（仅支持单个 IP）
- [ ] 定时任务调度
- [ ] 多设备并行检测
- [ ] 移动端应用
- [ ] 检测脚本的在线编辑功能

### 1.4 术语定义

| 术语 | 定义 |
|------|------|
| 检测用例 | 一个独立的安全检测项，包含名称、分类、脚本、危险等级等属性 |
| 检测任务 | 针对特定目标 IP 执行的一组检测用例的集合 |
| 用例分类 | 检测维度的分组，如身份认证、敏感信息、通信安全等 |
| 危险等级 | 漏洞的严重程度，分为高、中、低三级 |
| 安全基线 | 设备需要满足的最低安全标准 |

---

## 2. 用户和干系人

### 2.1 用户画像

| 用户类型 | 描述 | 使用场景 | 核心需求 |
|---------|------|---------|---------|
| 测试人员 | 负责执行安全检测的一线人员 | 日常设备安全检测、出厂前安全验收 | 快速执行检测、查看结果、导出报告 |
| 系统管理员 | 负责维护检测用例库的安全专家 | 更新安全用例、管理用户账号 | 灵活管理用例、分类维护、账号管理 |

### 2.2 干系人

| 角色 | 职责 |
|------|------|
| 产品负责人 | 需求确认、验收标准制定 |
| 技术负责人 | 技术方案决策、架构设计 |
| 安全专家 | 提供安全用例、脚本开发 |
| 测试人员 | 系统功能验收、日常使用 |

---

## 3. 功能需求

### 3.1 功能模块总览

| 模块ID | 模块名称 | 优先级 | 简要描述 |
|--------|---------|--------|---------|
| M-001 | 任务配置与执行模块 | P0 | 目标输入、用例选择、任务执行控制、状态展示 |
| M-002 | 检测用例库管理模块 | P0 | 用例CRUD、分类管理、脚本关联 |
| M-003 | 结果与报告模块 | P0 | 结果展示、报告导出、历史记录查询 |
| M-004 | 用户与权限模块 | P1 | 用户认证、角色权限管理 |

### 3.2 功能详细描述

---

#### F-001: 目标地址输入

**所属模块**: M-001
**优先级**: P0
**预估工时**: 1 人天

**用户故事**:
> 作为测试人员，我希望输入待测设备的 IP 地址，以便系统知道检测目标。

**功能描述**:
提供 IPv4 地址输入框，支持格式校验，确保输入的是有效的 IP 地址。

**前置条件**:
- 用户已登录系统
- 无正在执行的检测任务

**业务规则**:
1. 仅支持单个 IPv4 地址输入
2. 格式校验：必须符合 `xxx.xxx.xxx.xxx` 格式，每段 0-255
3. 不支持域名、IPv6、CIDR 格式

**验收标准 (AC)**:
- [x] AC1: 当输入有效 IPv4 地址时，系统接受输入并允许继续操作
- [x] AC2: 当输入无效格式时，系统显示错误提示"请输入有效的 IPv4 地址"
- [x] AC3: 当输入为空时，不允许启动检测任务

**依赖关系**: 无

---

#### F-002: 检测用例选择

**所属模块**: M-001
**优先级**: P0
**预估工时**: 2 人天

**用户故事**:
> 作为测试人员，我希望按分类查看并选择需要执行的检测用例，以便灵活控制检测范围。

**功能描述**:
以分类树形结构展示所有已启用的检测用例，支持多种选择方式。

**前置条件**:
- 已输入有效的目标 IP 地址
- 用例库中存在已启用的用例

**业务规则**:
1. 按"用例大类"分组展示用例
2. 支持"全选"所有用例
3. 支持"按类勾选"整个分类
4. 支持"多选"具体的检测项
5. 仅展示状态为"启用"的用例

**验收标准 (AC)**:
- [x] AC1: 用例按分类分组展示，分类可折叠/展开
- [x] AC2: 点击"全选"可选中所有用例，再次点击取消全选
- [x] AC3: 点击分类名称可选中/取消该分类下所有用例
- [x] AC4: 可单独勾选/取消单个用例
- [x] AC5: 至少选择一个用例才能启动检测

**依赖关系**: F-001

---

#### F-003: 任务执行控制

**所属模块**: M-001
**优先级**: P0
**预估工时**: 3 人天

**用户故事**:
> 作为测试人员，我希望能够启动和停止检测任务，以便控制检测流程。

**功能描述**:
提供"启动"和"停止"按钮，控制检测任务的执行。

**前置条件**:
- 已输入有效 IP 地址
- 已选择至少一个检测用例

**业务规则**:
1. 点击"启动"开始执行检测任务
2. 任务执行中可点击"停止/中断"终止检测
3. 针对同一目标 IP，同一时间仅允许执行一个检测任务
4. 每个检测项独立执行，单个用例失败不影响后续用例
5. **超时机制**: 单个脚本执行超时时间为 5 分钟，超时后自动标记为 Error 并继续执行下一个用例
6. **执行顺序**: 用例按分类顺序执行，同一分类内按用例 ID 顺序执行
7. **中断策略**: 任务中断后，已完成用例的结果自动保存；当前正在执行的用例标记为 Error（中断）

**验收标准 (AC)**:
- [x] AC1: 点击"启动"后，系统开始按顺序执行选中的用例
- [x] AC2: 任务执行中，"启动"按钮变为"停止"按钮
- [x] AC3: 点击"停止"后，系统终止当前任务，已完成的结果自动保存，当前执行用例标记为 Error（中断）
- [x] AC4: 任务执行中，不允许修改目标 IP 和用例选择
- [x] AC5: 单个用例执行失败时，继续执行下一个用例

**依赖关系**: F-001, F-002

---

#### F-004: 实时状态反馈

**所属模块**: M-001
**优先级**: P0
**预估工时**: 2 人天

**用户故事**:
> 作为测试人员，我希望实时看到检测进度和状态，以便了解任务执行情况。

**功能描述**:
实时展示检测任务的总体进度和每个用例的执行状态。

**前置条件**:
- 检测任务正在执行中

**业务规则**:
1. 展示总体进度（百分比或 X/Y 用例计数）
2. 展示当前正在执行的用例名称
3. 每个用例状态：等待、运行中、成功、失败

**验收标准 (AC)**:
- [x] AC1: 进度条/进度数字实时更新
- [x] AC2: 当前执行用例名称高亮显示
- [x] AC3: 用例状态使用不同颜色/图标区分（等待-灰色、运行中-蓝色、成功-绿色、失败-红色）
- [x] AC4: 任务完成后显示总耗时

**依赖关系**: F-003

---

#### F-005: 用例新增与编辑

**所属模块**: M-002
**优先级**: P0
**预估工时**: 3 人天

**用户故事**:
> 作为系统管理员，我希望能够新增和编辑检测用例，以便持续更新安全检测库。

**功能描述**:
提供用例管理界面，支持新增、编辑用例信息。

**前置条件**:
- 用户具有管理员权限

**业务规则**:
1. 用例属性：名称、所属分类、危险等级（高/中/低）、漏洞描述、修复建议
2. 每个用例需关联一个后台执行脚本（路径或标识符）
3. 支持一键启用或禁用用例
4. 用例名称在同一分类下唯一

**验收标准 (AC)**:
- [x] AC1: 可新增用例，填写所有必填字段后保存成功
- [x] AC2: 可编辑已有用例的所有属性
- [x] AC3: 可切换用例的启用/禁用状态
- [x] AC4: 必填字段为空时，显示校验错误提示
- [x] AC5: 脚本路径/标识符必须有效

**依赖关系**: 无

---

#### F-006: 用例分类管理

**所属模块**: M-002
**优先级**: P1
**预估工时**: 1 人天

**用户故事**:
> 作为系统管理员，我希望能够管理用例分类，以便组织检测维度。

**功能描述**:
支持对检测维度进行分类维护（增删改）。

**前置条件**:
- 用户具有管理员权限

**业务规则**:
1. 初始约 10 个分类：身份认证、敏感信息、通信安全等
2. 分类名称唯一
3. 删除分类前需确认该分类下无用例

**验收标准 (AC)**:
- [x] AC1: 可新增分类
- [x] AC2: 可编辑分类名称
- [x] AC3: 分类下无用例时可删除
- [x] AC4: 分类下有用例时，删除操作提示"请先移除该分类下的用例"

**依赖关系**: 无

---

#### F-007: 检测结果展示

**所属模块**: M-003
**优先级**: P0
**预估工时**: 2 人天

**用户故事**:
> 作为测试人员，我希望查看检测结果的汇总和详情，以便了解设备的安全状况。

**功能描述**:
展示检测任务的汇总信息和每个用例的详细结果。

**前置条件**:
- 检测任务已完成或已停止

**业务规则**:
1. 汇总信息：总执行时长、通过数量、未通过数量、漏洞等级分布
2. 详细清单：每个用例的执行结果（Pass/Fail/Error）及详细信息
3. 支持按结果状态筛选（全部/通过/未通过/错误）
4. **执行日志**: 可查看用例执行的详细日志（stdout/stderr），日志保留 30 天

**验收标准 (AC)**:
- [x] AC1: 汇总区域显示统计数据和漏洞等级分布图表
- [x] AC2: 详细清单列出所有执行的用例及结果
- [x] AC3: 点击用例可展开查看详细信息（漏洞描述、修复建议）
- [x] AC4: 可按状态筛选用例列表
- [x] AC5: 点击用例可查看执行日志（stdout/stderr）

**依赖关系**: F-003

---

#### F-008: 报告导出

**所属模块**: M-003
**优先级**: P0
**预估工时**: 3 人天

**用户故事**:
> 作为测试人员，我希望将检测结果导出为文档，以便存档和分享。

**功能描述**:
支持将检测结果导出为 PDF 或 HTML 格式的标准报告。

**前置条件**:
- 检测任务已完成

**业务规则**:
1. 报告内容：设备信息、任务概况、漏洞统计、详细检测项说明及修复建议
2. 支持 PDF 和 HTML 两种格式
3. 报告包含生成时间和检测人员信息

**验收标准 (AC)**:
- [x] AC1: 点击"导出 PDF"生成 PDF 格式报告
- [x] AC2: 点击"导出 HTML"生成 HTML 格式报告
- [x] AC3: 报告包含完整的设备信息、统计数据和详细检测项
- [x] AC4: 报告格式美观、专业

**依赖关系**: F-007

---

#### F-009: 用户认证

**所属模块**: M-004
**优先级**: P1
**预估工时**: 2 人天

**用户故事**:
> 作为用户，我希望通过账号密码登录系统，以便安全地使用系统功能。

**功能描述**:
提供用户登录功能，验证身份后才能访问系统。

**前置条件**:
- 用户账号已创建

**业务规则**:
1. 用户名 + 密码登录
2. 密码错误次数限制（5次锁定30分钟）
3. 会话超时自动登出（默认30分钟）

**验收标准 (AC)**:
- [x] AC1: 输入正确的用户名密码后成功登录
- [x] AC2: 密码错误时显示"用户名或密码错误"
- [x] AC3: 连续5次错误后账号锁定30分钟
- [x] AC4: 30分钟无操作后自动登出

**依赖关系**: 无

---

#### F-010: 账号管理

**所属模块**: M-004
**优先级**: P1
**预估工时**: 2 人天

**用户故事**:
> 作为系统管理员，我希望管理用户账号，以便控制系统访问权限。

**功能描述**:
管理员可创建、编辑、禁用用户账号，分配角色。

**前置条件**:
- 用户具有管理员权限

**业务规则**:
1. 角色：测试人员、系统管理员
2. 可创建新用户并分配角色
3. 可禁用/启用用户账号
4. 可重置用户密码

**验收标准 (AC)**:
- [x] AC1: 可创建新用户，设置用户名、初始密码、角色
- [x] AC2: 可编辑用户信息和角色
- [x] AC3: 可禁用/启用用户账号
- [x] AC4: 可重置用户密码

**依赖关系**: F-009

---

#### F-011: 历史记录查询

**所属模块**: M-003
**优先级**: P1
**预估工时**: 2 人天

**用户故事**:
> 作为测试人员，我希望查看历史检测记录，以便追溯设备的安全状态变化。

**功能描述**:
提供历史检测任务的查询和查看功能。

**前置条件**:
- 用户已登录系统

**业务规则**:
1. 保存所有检测任务的历史记录
2. 支持按时间范围筛选
3. 支持按目标 IP 筛选
4. 历史记录默认保留 90 天

**验收标准 (AC)**:
- [x] AC1: 可查看历史检测任务列表，显示任务时间、目标 IP、执行状态、用例数量
- [x] AC2: 可按时间范围筛选历史记录
- [x] AC3: 可按目标 IP 搜索历史记录
- [x] AC4: 点击历史任务可查看详细结果

**依赖关系**: F-007

---

## 4. 非功能需求

### 4.1 性能需求

| 指标 | 目标值 | 优先级 |
|------|--------|--------|
| 页面加载时间 | < 2s | P0 |
| 用例列表加载 | < 1s（1000条用例） | P0 |
| 报告生成时间 | < 10s | P1 |
| 并发用户数 | 10+ | P1 |

### 4.2 可用性需求

| 指标 | 目标值 |
|------|--------|
| 系统可用性 | 99% (工作时间) |
| 故障恢复时间 (RTO) | < 1小时 |

### 4.3 安全需求

| 需求 | 描述 |
|------|------|
| 身份认证 | 用户名 + 密码登录 |
| 权限控制 | 基于角色的访问控制 (RBAC) |
| 会话管理 | 超时自动登出，防止会话劫持 |
| 审计日志 | 记录用户登录、用例修改等敏感操作 |
| 脚本安全 | 仅管理员可修改检测脚本 |

### 4.4 兼容性需求

| 类型 | 要求 |
|------|------|
| 浏览器 | Chrome 90+, Firefox 88+, Edge 90+ |
| 屏幕分辨率 | 最小 1280x720 |

### 4.5 可扩展性需求

- 用例库支持从百级向千级平滑扩展
- 支持 Python、Shell 等多类型脚本
- 预留接口扩展能力

### 4.6 稳定性需求

- 检测过程为"非破坏性"测试
- 单个用例失败不影响整体任务
- 确保不影响待测设备的核心业务运行

### 4.7 UI/UX 需求

- 界面美观、现代化设计
- 操作流程简洁直观
- 响应式布局，适配不同屏幕尺寸
- 提供操作反馈和加载状态

---

## 5. 约束条件

### 5.1 技术约束

- **网络环境**: 系统需部署在与待测设备互通的局域网环境内
- **脚本兼容性**: 后台需具备通用接口，兼容 Python、Shell 等脚本
- **部署方式**: 支持本地部署

### 5.2 时间约束

- 项目启动: 2026-01-28
- 开发完成: TBD
- 上线日期: TBD

### 5.3 业务约束

- 针对同一目标 IP，同一时间仅允许执行一个检测任务
- 每个检测项作为独立单元执行

---

## 6. 假设与依赖

### 6.1 假设

- 假设1: 安全检测脚本由安全专家提供，系统仅负责调用执行
- 假设2: 待测设备在检测期间保持网络可达
- 假设3: 用户具备基本的安全检测知识

### 6.2 依赖

| 依赖项 | 类型 | 提供方 | 状态 |
|--------|------|--------|------|
| 安全检测脚本 | 内部 | 安全团队 | 已有100+脚本 |
| 脚本执行环境 | 内部 | 运维团队 | 待确认 |

---

## 7. 风险识别

| 风险ID | 风险描述 | 影响 | 概率 | 缓解措施 |
|--------|---------|------|------|---------|
| R-001 | 脚本执行超时导致任务阻塞 | 高 | 中 | 设置脚本执行超时机制 |
| R-002 | 用例库扩展后性能下降 | 中 | 低 | 分页加载、索引优化 |
| R-003 | 检测脚本误操作影响设备 | 高 | 低 | 脚本审核机制、沙箱执行 |
| R-004 | 网络不稳定导致检测中断 | 中 | 中 | 断点续测、重试机制 |

---

## 8. 附录

### 8.1 用例分类参考

| 分类ID | 分类名称 | 描述 |
|--------|---------|------|
| C-001 | 身份认证 | 登录、认证相关安全检测 |
| C-002 | 敏感信息 | 敏感数据泄露检测 |
| C-003 | 通信安全 | 加密传输、协议安全检测 |
| C-004 | 访问控制 | 权限、授权相关检测 |
| C-005 | 配置安全 | 系统配置合规性检测 |
| C-006 | 固件安全 | 固件版本、漏洞检测 |
| C-007 | 网络安全 | 端口、服务暴露检测 |
| C-008 | 日志审计 | 日志记录完整性检测 |
| C-009 | 物理安全 | 物理接口安全检测 |
| C-010 | 应急响应 | 安全事件响应能力检测 |

### 8.2 界面原型

[待补充]

### 8.3 系统流程图

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  输入目标IP  │────>│  选择用例   │────>│  启动检测   │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                                              ▼
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  导出报告   │<────│  查看结果   │<────│  执行检测   │
└─────────────┘     └─────────────┘     └─────────────┘
```

---

## 签字确认

| 角色 | 姓名 | 签字 | 日期 |
|------|------|------|------|
| 产品负责人 | | | |
| 技术负责人 | | | |
| 测试负责人 | | | |
| 项目经理 | | | |
